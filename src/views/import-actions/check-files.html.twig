<script>
  MyLibrary.import.addAction({
    title: 'Check Book Files',
    description: 'Find records in database that don\'t have corresponding book file.'
  }, function (e, $result, button) {
    $.get('api/config/check-files', function (data) {
        if (data.fs.length === 0 && data.db.length === 0) {
          $result.setMsg('Great news! Your library is synced already. Keep it up.', button.title, true)
          return
        }

        $result.append('<br /><p><b>FileSystem only records (files)</b></p>' + '<ul>')
        for (let i = 0; i < data.fs.length; i++) {
          $result.append('<li>' + data.fs[i] + '</li>')
        }
        $result.append('</ul><br />')

        $result.append('<p><b>DB only records</b></p>' + '<ul>')
        for (let i = 0; i < data.db.length; i++) {
          $result.append('<li>' + data.db[i] + '</li>')
        }
        $result.append('</ul><br />')
      },
      'json')
      .fail(MyLibrary.showApiFail(button.title, $result))
  })
</script>